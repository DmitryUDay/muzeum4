<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Карточка</title>

<link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="builderStyle.css">


</head>
<body>

<button class="exit" id="exitBtn" title="Назад">←</button>
<br>
<div class="wrap">
  <div class="title">
    <div class="badge" id="categoryBadge">Категория</div>
    <div>
      <h1 id="cardTitle">Название</h1>
      <div class="meta" id="cardMeta">Класс</div>
    </div>
  </div>

  <div class="card">
    <div class="media">
      <img id="cardImage" src="" alt="Изображение">
    </div>
    <div class="content">
      <div class="desc" id="cardText">Описание</div>
    </div>
  </div>
</div>

<script>
  // Получаем параметры из URL
  const params = new URLSearchParams(window.location.search);
  const category = params.get("category");
  const id = params.get("id");

  // Загружаем JSON
  async function loadData() {
    try {
      const response = await fetch("data.json");
      const data = await response.json();

      if (!data[category]) {
        document.getElementById("cardText").textContent = "Категория не найдена.";
        return;
      }

      const item = data[category].find(el => el.id === id);
      if (!item) {
        document.getElementById("cardText").textContent = "Экспонат не найден.";
        return;
      }

      // Заполняем страницу
      if (category == 'life'){
          helpa = 'Предметы быта';
      }else if (category == 'family'){
          helpa = 'История семьи';
      }else if (category == 'war'){
          helpa = 'ВОВ';
      }else if (category == 'clothes'){
          helpa = 'Одежда';
        }else{
          helpa = 'Error';
      }
      document.getElementById("categoryBadge").textContent = helpa.toUpperCase();
      document.getElementById("cardTitle").textContent = item.title || "Без названия";
      document.getElementById("cardMeta").textContent = item.buk ? `Класс ${item.buk}` : "";
      document.getElementById("cardText").textContent = item.text || "";
      document.getElementById("cardImage").src = item.image || "";
      document.getElementById("cardImage").alt = item.title || "";
    } catch (err) {
      console.error("Ошибка загрузки данных:", err);
      document.getElementById("cardText").textContent = "Ошибка при загрузке данных.";
    }
  }

  loadData();

  // Кнопка "Назад"
  document.getElementById("exitBtn").addEventListener("click", () => {
    if (document.referrer) window.history.back();
    else window.location.href = "index.html";
  });

  // ESC для возврата
  window.addEventListener("keydown", e => {
    if (e.key === "Escape") document.getElementById("exitBtn").click();
  });
</script>

</body>
</html>
